#*****************************************************#
# Play List 9 (pl9)                                   #
# Seed Song is spotify:track:4w7hIjpuEfvMPiyEgdqlf6   #
# "Jude Law and a Semester Abroad" by Brand New       #
#*****************************************************#

import numpy as np

class pl9:

	def __init__(self):

		self.songNum = 0 ## start counting from 0

		self.song_pool = [['7ve7SjgFNCQiuwaYP6uERF', 0], ['7LPIodZJ9BPhSQJ8xP58RO', 0], ['3Os9503dPpKKmO2ED9fK7r', 0], ['2naCQzUdZSGcdVKwHOX7m2', 0], ['0m1yl39WDQPjNCPoU9nCkc', 0], ['6Ng8VpVdgIVmJw4HY4eId9', 0], ['2Qi2k2gp9U3G5oHcI37O5X', 0], ['2EdQiFttFFWeRHyX5viC4I', 0], ['1EHGlF5ppbwnIK4OuJn5Yr', 0], ['1WlvlG93hQyxtVLlnq6vc2', 0], ['1rh6RoD2Y86GqSM9S1dxlv', 0], ['2TBdpvgv16dosmomgXFO8j', 0], ['0i4nHa7wLCX11M7yIp7iTJ', 0], ['5MTo2C0qPhIg5hXDcgIDeU', 0], ['6KUyfQ0plIea8MjoaaI7Fh', 0], ['3F58qd8gYOFO7pRRkuusGj', 0], ['3wXEcx1fPzVkBypaxWKeWG', 0], ['0QT5hq3cDnaFwSYtmA1jHL', 0], ['2WIvgRuw1yVQWLQkKUpz70', 0], ['4UedtWlXGpIYoVehzib4M7', 0], ['56a69IayeowF3rfnxdLkS8', 0], ['7MeUFHaHTgcLqz56vSyvIh', 0], ['7KAraiSI373WhwstLzaGYw', 0], ['69RVFjV45xVbWm7bPCEXkF', 0], ['79ttpwqKsPMOJYgwMYaysv', 0], ['77NIHlocBy2uwWigb2flrn', 0], ['2fXS0jxRdgECx7zDcfVvf5', 0], ['0buhxQqFPomDaT2XJx03gO', 0], ['3ty20wzFQDGRV5VVCG9O1d', 0], ['3kH9TyE9avQ8GgZwIF9uJ5', 0]]

		self.prob_matrix = [[0.0, 90.84579999999998, 38.924899999999994, 93.09110151999998, 90.45402, 17.98299999999999, 78.00539999999998, 105.33709999999999, 56.503899999999994, 100.33959999999999, 72.64379999999998, 28.477984399999976, 92.26461049999999, 100.27859999999998, 106.62243, 84.69249999999998, 91.14119999999998, 65.10882199999999, 91.52672539999999, 114.50278999999999, 47.283114, 98.42975, 127.23379399999999, 62.843399999999974, 107.22059999999998, 136.23139999999998, 46.549643, 71.087628, 65.4735, 58.19785999999998], [90.84579999999998, 0.0, 52.909499999999994, 2.6085015199999932, 3.277420000000006, 74.5468, 13.710400000000002, 18.0369, 37.5197, 13.399400000000004, 20.830400000000004, 66.02798440000001, 3.9064104999999953, 11.382399999999993, 18.477830000000004, 6.783900000000001, 4.944600000000002, 26.120222000000005, 2.1693254, 25.38059, 48.42931399999999, 8.052950000000004, 36.526394, 32.89720000000001, 16.374799999999993, 45.869600000000005, 47.53144299999999, 26.203827999999994, 30.84989999999999, 34.03926000000001], [38.924899999999994, 52.909499999999994, 0.0, 55.158001519999985, 54.08692, 22.349900000000005, 40.54029999999999, 68.74799999999999, 19.958799999999997, 64.0925, 36.364699999999985, 14.174884400000021, 54.61351049999999, 62.78349999999998, 69.28733, 47.14739999999999, 53.67609999999999, 27.463721999999986, 53.81362539999999, 76.76168999999999, 8.964214, 60.70865, 88.832894, 26.346299999999978, 68.95369999999998, 97.8365, 10.026543000000004, 32.438728, 27.540399999999998, 20.29095999999998], [93.09110151999998, 2.6085015199999932, 55.158001519999985, 0.0, 3.410921519999988, 76.71370151999999, 16.237301519999995, 15.593801520000005, 39.68660151999999, 10.975501520000009, 22.997298479999998, 68.19488288000001, 1.4633089800000019, 8.93930152, 16.027328480000012, 9.303398479999995, 7.467298479999995, 28.279720479999995, 1.5982238799999924, 22.93749152000001, 51.037412479999986, 6.023248480000012, 34.45889248000001, 35.113701520000006, 14.31189848, 43.86069848000001, 49.69834147999998, 28.64892647999999, 33.37680151999999, 36.64775848000001], [90.45402, 3.277420000000006, 54.08692, 3.410921519999988, 0.0, 73.34902, 16.446620000000006, 15.196919999999993, 36.33412, 10.200419999999998, 19.61558000000001, 64.81618440000001, 2.7315904999999896, 10.983419999999988, 16.91479, 9.498720000000008, 7.65942000000001, 26.87840200000001, 1.8665053999999954, 24.991769999999995, 51.544334, 8.83417, 37.777814, 31.75462000000002, 17.593219999999988, 46.65982, 46.33786299999999, 29.463248, 33.98252, 36.86468000000002], [17.98299999999999, 74.5468, 22.349900000000005, 76.71370151999999, 73.34902, 0.0, 61.606399999999994, 88.3941, 38.7829, 82.8054, 55.084799999999994, 10.828984399999985, 75.8816105, 83.79959999999998, 90.23943, 68.3095, 74.70299999999999, 48.725821999999994, 75.1437254, 98.04379, 30.984114000000005, 82.10575, 110.896794, 45.13559999999998, 90.92159999999998, 119.9324, 28.70084300000001, 54.788628, 49.090500000000006, 41.898859999999985], [78.00539999999998, 13.710400000000002, 40.54029999999999, 16.237301519999995, 16.446620000000006, 61.606399999999994, 0.0, 31.4285, 24.855299999999996, 26.471800000000005, 8.062000000000001, 53.08558440000001, 17.012010499999995, 24.286799999999996, 31.627030000000005, 7.124700000000001, 13.146599999999998, 13.481422000000002, 15.336925400000002, 38.50019, 35.36371399999999, 20.52155000000001, 49.465194000000004, 20.200000000000014, 29.317199999999993, 58.32800000000001, 34.737242999999985, 13.300227999999994, 17.79789999999999, 20.658060000000013], [105.33709999999999, 18.0369, 68.74799999999999, 15.593801520000005, 15.196919999999993, 88.3941, 31.4285, 0.0, 51.36319999999999, 8.859499999999995, 34.6807, 79.9028844, 14.435510500000003, 7.258500000000004, 2.091330000000007, 24.507199999999997, 22.677100000000003, 41.865722000000005, 16.1156254, 10.033690000000004, 66.30421399999999, 14.541849999999993, 22.580894000000004, 46.799700000000016, 21.485700000000005, 31.800500000000007, 61.38294299999998, 44.24072799999999, 48.718999999999994, 51.820960000000014], [56.503899999999994, 37.5197, 19.958799999999997, 39.68660151999999, 36.33412, 38.7829, 24.855299999999996, 51.36319999999999, 0.0, 44.1623, 16.867899999999995, 28.738084400000016, 38.92671049999999, 47.09929999999999, 53.244530000000005, 31.463999999999995, 38.00189999999999, 11.694921999999993, 38.126825399999994, 61.074889999999996, 17.717013999999995, 45.08465, 73.869694, 6.754499999999982, 53.894499999999994, 82.9533, 10.087742999999993, 17.761528000000006, 12.061800000000005, 4.909759999999984], [100.33959999999999, 13.399400000000004, 64.0925, 10.975501520000009, 10.200419999999998, 82.8054, 26.471800000000005, 8.859499999999995, 44.1623, 0.0, 27.852200000000007, 72.16838440000002, 9.54101050000001, 4.50899999999999, 10.704830000000001, 19.548900000000003, 17.709600000000005, 37.06922200000001, 11.283125400000003, 18.60719, 61.666714, 9.688349999999998, 31.397394, 39.746200000000016, 16.84820000000001, 40.373000000000005, 54.10604299999999, 39.603228, 44.1079, 46.93546000000001], [72.64379999999998, 20.830400000000004, 36.364699999999985, 22.997298479999998, 19.61558000000001, 55.084799999999994, 8.062000000000001, 34.6807, 16.867899999999995, 27.852200000000007, 0.0, 45.28641560000001, 22.1491895, 30.379199999999997, 36.45537000000001, 14.615700000000002, 21.154, 9.218178000000002, 21.399785400000003, 44.42701, 33.916085999999986, 28.383450000000007, 57.259806000000005, 12.214400000000012, 37.1502, 66.19060000000002, 26.782156999999984, 11.853171999999994, 16.33249999999999, 19.183740000000007], [28.477984399999976, 66.02798440000001, 14.174884400000021, 68.19488288000001, 64.81618440000001, 10.828984399999985, 53.08558440000001, 79.9028844, 28.738084400000016, 72.16838440000002, 45.28641560000001, 0.0, 67.38051990000001, 75.37738440000001, 81.70780560000001, 59.79013560000001, 66.1840356, 40.19283760000001, 66.61074100000002, 89.65475440000002, 22.46514960000002, 73.58678560000001, 102.48362960000001, 35.402584399999995, 82.40263560000001, 111.41343560000001, 18.859678600000024, 46.269663600000015, 40.57008440000002, 33.3798956], [92.26461049999999, 3.9064104999999953, 54.61351049999999, 1.4633089800000019, 2.7315904999999896, 75.8816105, 17.012010499999995, 14.435510500000003, 38.92671049999999, 9.54101050000001, 22.1491895, 67.38051990000001, 0.0, 8.258010499999997, 14.72432550000001, 10.090655499999995, 8.260555499999997, 27.6331335, 1.7421148999999954, 22.277820500000008, 52.17366949999999, 6.24730550000001, 35.11234950000001, 34.28721050000001, 15.063155499999997, 44.07395550000001, 48.870398499999986, 30.11018349999999, 34.58851049999999, 37.44241550000001], [100.27859999999998, 11.382399999999993, 62.78349999999998, 8.93930152, 10.983419999999988, 83.79959999999998, 24.286799999999996, 7.258500000000004, 47.09929999999999, 4.50899999999999, 30.379199999999997, 75.37738440000001, 8.258010499999997, 0.0, 7.555830000000011, 17.460699999999996, 15.486599999999996, 35.890221999999994, 9.240125399999993, 14.29019000000001, 59.64971399999999, 7.671349999999988, 27.10639400000001, 42.443200000000004, 14.831199999999999, 36.134000000000015, 56.98044299999998, 37.58622799999999, 42.06489999999999, 44.91846], [106.62243, 18.477830000000004, 69.28733, 16.027328480000012, 16.91479, 90.23943, 31.627030000000005, 2.091330000000007, 53.244530000000005, 10.704830000000001, 36.45537000000001, 81.70780560000001, 14.72432550000001, 7.555830000000011, 0.0, 24.503930000000004, 22.785230000000006, 41.83319200000001, 16.355155400000005, 8.706559999999996, 66.743116, 14.784679999999998, 21.506435999999997, 48.64503000000002, 21.40563000000001, 30.34483, 63.226786999999995, 44.662602, 49.18293, 52.04237000000002], [84.69249999999998, 6.783900000000001, 47.14739999999999, 9.303398479999995, 9.498720000000008, 68.3095, 7.124700000000001, 24.507199999999997, 31.463999999999995, 19.548900000000003, 14.615700000000002, 59.79013560000001, 10.090655499999995, 17.460699999999996, 24.503930000000004, 0.0, 6.6584999999999965, 19.888322000000002, 8.4114854, 31.578890000000005, 42.38518599999999, 14.012750000000006, 42.960506, 26.807100000000013, 22.612499999999997, 51.78690000000001, 41.34285699999999, 20.304671999999993, 24.826199999999993, 27.68244000000001], [91.14119999999998, 4.944600000000002, 53.67609999999999, 7.467298479999995, 7.65942000000001, 74.70299999999999, 13.146599999999998, 22.677100000000003, 38.00189999999999, 17.709600000000005, 21.154, 66.1840356, 8.260555499999997, 15.486599999999996, 22.785230000000006, 6.6584999999999965, 0.0, 26.542822, 6.581385400000002, 29.748790000000007, 46.77988599999999, 10.185450000000008, 38.96320600000001, 33.33580000000001, 16.2186, 45.28160000000001, 47.876156999999985, 22.30137199999999, 28.32009999999999, 33.38514000000001], [65.10882199999999, 26.120222000000005, 27.463721999999986, 28.279720479999995, 26.87840200000001, 48.725821999999994, 13.481422000000002, 41.865722000000005, 11.694921999999993, 37.06922200000001, 9.218178000000002, 40.19283760000001, 27.6331335, 35.890221999999994, 41.83319200000001, 19.888322000000002, 26.542822, 0.0, 26.761963400000003, 49.896032000000005, 24.919507999999986, 33.72507200000001, 62.644828000000004, 7.131422000000011, 42.218022, 71.541222, 21.713178999999986, 6.342994000000011, 7.359321999999989, 10.276762000000009], [91.52672539999999, 2.1693254, 53.81362539999999, 1.5982238799999924, 1.8665053999999954, 75.1437254, 15.336925400000002, 16.1156254, 38.126825399999994, 11.283125400000003, 21.399785400000003, 66.61074100000002, 1.7421148999999954, 9.240125399999993, 16.355155400000005, 8.4114854, 6.581385400000002, 26.761963400000003, 0.0, 23.219935400000004, 50.43501139999999, 6.986135400000005, 35.9207314, 33.549325400000015, 15.801985399999994, 44.84678540000001, 48.13108239999999, 28.372097399999994, 32.85142539999999, 35.726665400000016], [114.50278999999999, 25.38059, 76.76168999999999, 22.93749152000001, 24.991769999999995, 98.04379, 38.50019, 10.033690000000004, 61.074889999999996, 18.60719, 44.42701, 89.65475440000002, 22.277820500000008, 14.29019000000001, 8.706559999999996, 31.578890000000005, 29.748790000000007, 49.896032000000005, 23.219935400000004, 0.0, 73.647904, 21.669539999999998, 12.872584, 56.449390000000015, 28.829390000000007, 21.908190000000005, 71.03263299999999, 51.584418, 56.062689999999996, 58.91665000000002], [47.283114, 48.42931399999999, 8.964214, 51.037412479999986, 51.544334, 30.984114000000005, 35.36371399999999, 66.30421399999999, 17.717013999999995, 61.666714, 33.916085999999986, 22.46514960000002, 52.17366949999999, 59.64971399999999, 66.743116, 42.38518599999999, 46.77988599999999, 24.919507999999986, 50.43501139999999, 73.647904, 0.0, 51.982636, 80.08948, 22.14651399999998, 59.989485999999985, 89.270286, 7.897271000000004, 25.805086, 18.601214, 14.732345999999978], [98.42975, 8.052950000000004, 60.70865, 6.023248480000012, 8.83417, 82.10575, 20.52155000000001, 14.541849999999993, 45.08465, 9.688349999999998, 28.383450000000007, 73.58678560000001, 6.24730550000001, 7.671349999999988, 14.784679999999998, 14.012750000000006, 10.185450000000008, 33.72507200000001, 6.986135400000005, 21.669539999999998, 51.982636, 0.0, 28.947756, 38.45615000000002, 8.815849999999989, 37.86865, 55.08890699999999, 31.919722, 34.459649999999996, 40.44969000000002], [127.23379399999999, 36.526394, 88.832894, 34.45889248000001, 37.777814, 110.896794, 49.465194000000004, 22.580894000000004, 73.869694, 31.397394, 57.259806000000005, 102.48362960000001, 35.11234950000001, 27.10639400000001, 21.506435999999997, 42.960506, 38.96320600000001, 62.644828000000004, 35.9207314, 12.872584, 80.08948, 28.947756, 0.0, 67.24719400000002, 35.082806000000005, 16.405606, 83.87995099999999, 59.730565999999996, 62.847294, 69.14606600000002], [62.843399999999974, 32.89720000000001, 26.346299999999978, 35.113701520000006, 31.75462000000002, 45.13559999999998, 20.200000000000014, 46.799700000000016, 6.754499999999982, 39.746200000000016, 12.214400000000012, 35.402584399999995, 34.28721050000001, 42.443200000000004, 48.64503000000002, 26.807100000000013, 33.33580000000001, 7.131422000000011, 33.549325400000015, 56.449390000000015, 22.14651399999998, 38.45615000000002, 67.24719400000002, 0.0, 47.272000000000006, 76.28280000000002, 16.634242999999973, 13.139028000000021, 5.496100000000022, 9.41526], [107.22059999999998, 16.374799999999993, 68.95369999999998, 14.31189848, 17.593219999999988, 90.92159999999998, 29.317199999999993, 21.485700000000005, 53.894499999999994, 16.84820000000001, 37.1502, 82.40263560000001, 15.063155499999997, 14.831199999999999, 21.40563000000001, 22.612499999999997, 16.2186, 42.218022, 15.801985399999994, 28.829390000000007, 59.989485999999985, 8.815849999999989, 35.082806000000005, 47.272000000000006, 0.0, 30.035200000000014, 63.90475699999998, 37.29497199999999, 41.83269999999999, 49.022740000000006], [136.23139999999998, 45.869600000000005, 97.8365, 43.86069848000001, 46.65982, 119.9324, 58.32800000000001, 31.800500000000007, 82.9533, 40.373000000000005, 66.19060000000002, 111.41343560000001, 44.07395550000001, 36.134000000000015, 30.34483, 51.78690000000001, 45.28160000000001, 71.541222, 44.84678540000001, 21.908190000000005, 89.270286, 37.86865, 16.405606, 76.28280000000002, 30.035200000000014, 0.0, 92.91555699999999, 65.792572, 71.2715, 78.04354000000002], [46.549643, 47.53144299999999, 10.026543000000004, 49.69834147999998, 46.33786299999999, 28.70084300000001, 34.737242999999985, 61.38294299999998, 10.087742999999993, 54.10604299999999, 26.782156999999984, 18.859678600000024, 48.870398499999986, 56.98044299999998, 63.226786999999995, 41.34285699999999, 47.876156999999985, 21.713178999999986, 48.13108239999999, 71.03263299999999, 7.897271000000004, 55.08890699999999, 83.87995099999999, 16.634242999999973, 63.90475699999998, 92.91555699999999, 0.0, 27.772214999999996, 22.079342999999994, 14.882016999999976], [71.087628, 26.203827999999994, 32.438728, 28.64892647999999, 29.463248, 54.788628, 13.300227999999994, 44.24072799999999, 17.761528000000006, 39.603228, 11.853171999999994, 46.269663600000015, 30.11018349999999, 37.58622799999999, 44.662602, 20.304671999999993, 22.30137199999999, 6.342994000000011, 28.372097399999994, 51.584418, 25.805086, 31.919722, 59.730565999999996, 13.139028000000021, 37.29497199999999, 65.792572, 27.772214999999996, 0.0, 7.6997279999999995, 12.89143200000002], [65.4735, 30.84989999999999, 27.540399999999998, 33.37680151999999, 33.98252, 49.090500000000006, 17.79789999999999, 48.718999999999994, 12.061800000000005, 44.1079, 16.33249999999999, 40.57008440000002, 34.58851049999999, 42.06489999999999, 49.18293, 24.826199999999993, 28.32009999999999, 7.359321999999989, 32.85142539999999, 56.062689999999996, 18.601214, 34.459649999999996, 62.847294, 5.496100000000022, 41.83269999999999, 71.2715, 22.079342999999994, 7.6997279999999995, 0.0, 7.496160000000019], [58.19785999999998, 34.03926000000001, 20.29095999999998, 36.64775848000001, 36.86468000000002, 41.898859999999985, 20.658060000000013, 51.820960000000014, 4.909759999999984, 46.93546000000001, 19.183740000000007, 33.3798956, 37.44241550000001, 44.91846, 52.04237000000002, 27.68244000000001, 33.38514000000001, 10.276762000000009, 35.726665400000016, 58.91665000000002, 14.732345999999978, 40.44969000000002, 69.14606600000002, 9.41526, 49.022740000000006, 78.04354000000002, 14.882016999999976, 12.89143200000002, 7.496160000000019, 0.0]]

		self.AVDIFF = self.avDiff()
		self.track = self.song_pool[self.songNum][0]

	def flag_current_song_done(self):
		print("flag called, songNum = " + str(self.songNum))
		row = self.songNum
		self.song_pool[row][1] = 1

	def get_current_track(self):
		print(self.track)
		return self.track

	def next_track(self, action):
		self.flag_current_song_done()
		if action == 'finish':

			currentSongNum = self.songNum
			row = self.songNum
			thresh1 = (self.AVDIFF/3)

			for i in range(len(self.prob_matrix[row])):
				if row == i:
					continue
				elif self.song_pool[i][1] == 0:
					if self.prob_matrix[row][i] < thresh1:
						self.track = self.song_pool[i][0]
						self.songNum = i
						break

			if self.songNum == currentSongNum:
				temp = self.prob_matrix[row]
				temp.pop(row)
				self.songNum = np.argmin(temp)

		elif action == 'like':

			currentSongNum = self.songNum
			row = self.songNum
			thresh = (self.AVDIFF/4)

			for i in range(len(self.prob_matrix[row])):
				if row == i:
					continue
				elif self.song_pool[i][1] == 0:
					if self.prob_matrix[row][i] < thresh:
						self.track = self.song_pool[i][0]
						self.songNum = i
						break

			if self.songNum == currentSongNum:
				temp = self.prob_matrix[row]
				temp.pop(row)
				self.songNum = np.argmin(temp)

		elif action == 'dislike':

			currentSongNum = self.songNum			
			row = self.songNum
			thresh1 = (self.AVDIFF)

			for i in range(len(self.prob_matrix[row])):
				if row == i:
					continue
				elif self.song_pool[i][1] == 0:
					if self.prob_matrix[row][i] > thresh1:
						self.track = self.song_pool[i][0]
						self.songNum = i
						break

			if self.songNum == currentSongNum:
				temp = self.prob_matrix[row]
				temp.pop(row)
				self.songNum = np.argmax(temp)

		elif action == 'skip':

			currentSongNum = self.songNum
			row = self.songNum
			thresh1 = (self.AVDIFF/2)

			for i in range(len(self.prob_matrix[row])):
				if row == i:
					continue
				elif self.song_pool[i][1] == 0:
					if self.prob_matrix[row][i] > thresh1:
						self.track = self.song_pool[i][0]
						self.songNum = i
						break

			if self.songNum == currentSongNum:
				temp = self.prob_matrix[row]
				temp.pop(row)
				self.songNum = np.argmax(temp)

	def avDiff(self):
		## avDiff is the same for all rows
		row = 0
		tot = 0

		for i in range(len(self.prob_matrix[row])):
			tot = tot + self.prob_matrix[row][i]
		return tot/len(self.prob_matrix)

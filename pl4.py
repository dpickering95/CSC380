#*****************************************************#
# Play List 4 (pl4)                                   #
# Seed Song is spotify:track:4q6oNFTjZmJqkIgPdp8iR1   #
# "Lord Willin'" by Logic                             #
#*****************************************************#

import numpy as np

class pl4

	def __init__(self):

		self.songNum = 0 ## start counting from 0

		self.song_pool = [['7JpewU9FPkJyiOi0CErkpI', 0], ['2UmtjSvU9FOVKJH9trz7Ht', 0], ['73WVn9jXiLvjO0jq6x4hYX', 0], ['4bTP7W5HEJYG0jR6EMfNka', 0], ['7oS8bXF6acAYoGBQ0mFdNM', 0], ['1RxwkmMgJS7l2VYCgJ8KMn', 0], ['150KXwjGMNjoaGAnQf4oGm', 0], ['2Ki7cuOuvlA9LozOPdWtV7', 0], ['4uTTsXhygWzSjUxXLHZ4HW', 0], ['4pEFXBz2GlJLWsZJoQwdrq', 0], ['71lyUtIPCMAYjTwwwxy2jW', 0], ['2RPbEp0DyBVlkRvvYKopO7', 0], ['5FX89IUKm9QJT9ymrmyK4k', 0], ['66UI237YMw6AL6S72FGKND', 0], ['5hqh0JUxRShhqdaxu7wlz5', 0], ['2NoKRHt8LVpnQMVl3TPwvu', 0], ['0qLt7pQhm8LDxFgI0YXdlY', 0], ['5f6esnDQcBiFAm8iMfkw12', 0], ['0CsMyYqXKbdznGEXSjSroo', 0], ['2TsBRXZQSGp1aaYeNPcT9o', 0], ['5q5MyfXey3ms6IyT6TYf5L', 0], ['6Oi5FTOvWeHiauCJ7uxZJN', 0], ['0eFUkTyGUYcjYazR3mmYWm', 0], ['2pUrFLAbWbUqZnnSgJ2u5I', 0], ['4z3X794EXFeZLsaF7FEwTj', 0], ['5ZG3rfELLkBKBlimrLFPCf', 0], ['7e5z8Set6bsGDh8KIsZnoX', 0], ['27mAxmIMCalJIinL20BgKV', 0], ['0k1UD7uf86qhxa9WkqJoCS', 0], ['3U6s3shLBpFLVy4Iu9gJDJ', 0]]

		self.prob_matrix = [[0.0, 10.328200000000004, 21.480999999999995, 4.549000000000001, 11.144999999999989, 4.894201659999997, 8.245099999999994, 16.842000000000013, 23.271, 6.718000000000003, 28.1270212, 5.752999999999997, 11.833053899999998, 33.253, 27.568999999999992, 7.896011000000003, 44.207, 4.2250065899999925, 30.522318500000015, 34.675556, 4.724900000000001, 6.507816300000002, 13.161847000000003, 6.7210000000000045, 16.310000000000002, 24.978400000000004, 59.67420261000001, 5.816999999999996, 26.23699999999999, 40.451], [10.328200000000004, 0.0, 11.745199999999988, 9.153200000000004, 1.787200000000016, 8.954001660000008, 16.2271, 11.044200000000009, 15.157199999999998, 5.102200000000002, 18.667221199999997, 6.275200000000009, 2.113253900000007, 39.144800000000004, 35.795199999999994, 10.538211000000002, 52.64320000000001, 12.779206589999998, 22.37411850000001, 42.794956000000006, 12.881300000000007, 6.611416300000003, 19.410047000000006, 8.949200000000001, 6.936199999999999, 14.9782, 51.69800261, 14.371200000000002, 32.61919999999999, 49.00520000000001], [21.480999999999995, 11.745199999999988, 0.0, 18.051999999999992, 10.768000000000004, 18.011201659999994, 25.434099999999987, 6.298999999999979, 5.97200000000001, 16.07099999999999, 6.922021200000007, 15.779999999999996, 11.122053899999994, 48.269999999999996, 44.79999999999998, 19.25101099999999, 61.26199999999999, 21.398006589999987, 11.22531850000002, 51.67855599999999, 22.015899999999995, 15.58681629999999, 28.124846999999995, 17.869999999999987, 5.37699999999999, 4.405400000000013, 41.369202610000016, 23.17399999999999, 41.27599999999998, 58.812], [4.549000000000001, 9.153200000000004, 18.051999999999992, 0.0, 7.773999999999988, 0.6772016600000053, 7.746099999999993, 17.23900000000001, 23.726000000000003, 7.197000000000001, 23.694021199999998, 3.085999999999996, 7.474053899999997, 32.85, 27.069999999999993, 3.463011000000002, 43.800000000000004, 3.6260065899999945, 26.259318500000013, 34.272556, 4.525900000000004, 3.014816300000001, 12.542847000000005, 2.172000000000003, 15.553000000000003, 22.251400000000004, 57.27720261, 5.217999999999996, 25.61799999999999, 41.848000000000006], [11.144999999999989, 1.787200000000016, 10.768000000000004, 7.773999999999988, 0.0, 8.261201659999992, 15.520099999999982, 11.831000000000026, 16.070000000000014, 5.558999999999985, 17.03602120000001, 5.621999999999991, 1.1700539000000099, 38.46399999999999, 34.84399999999998, 8.923010999999986, 51.401999999999994, 10.992006589999981, 21.885318500000025, 41.87455599999999, 11.92789999999999, 5.854816299999987, 18.026846999999993, 7.653999999999984, 7.9930000000000145, 14.785400000000015, 51.73920261000002, 12.663999999999984, 31.10199999999998, 48.151999999999994], [4.894201659999997, 8.954001660000008, 18.011201659999994, 0.6772016600000053, 8.261201659999992, 0.0, 7.85910165999999, 17.89820166000002, 23.829201660000006, 7.598201660000005, 24.143219540000004, 3.14720166, 7.841252240000002, 32.283401659999996, 27.409201659999987, 3.954209340000007, 43.93720166, 4.0732049299999895, 25.853916840000018, 34.088954339999994, 4.669301659999999, 2.4394146400000056, 12.525245340000001, 2.669201660000008, 15.552201660000007, 22.073801660000008, 57.04600095000001, 5.797201659999993, 25.913201659999988, 42.27720166], [8.245099999999994, 16.2271, 25.434099999999987, 7.746099999999993, 15.520099999999982, 7.85910165999999, 0.0, 24.97510000000001, 31.088099999999997, 14.913099999999995, 26.77012119999999, 10.44209999999999, 14.404153899999992, 25.593900000000012, 20.6281, 6.611110999999996, 42.50810000000001, 5.310106589999998, 30.143218500000007, 30.07445600000001, 3.87980000000001, 10.198716299999994, 5.862946999999989, 8.396099999999997, 22.867099999999994, 29.435299999999998, 64.46110261, 3.130100000000003, 22.510099999999998, 41.68610000000001], [16.842000000000013, 11.044200000000009, 6.298999999999979, 17.23900000000001, 11.831000000000026, 17.89820166000002, 24.97510000000001, 0.0, 8.094999999999988, 13.178000000000011, 12.707021199999986, 14.751000000000019, 12.609053900000017, 50.08900000000001, 44.29900000000001, 20.598011000000014, 61.039000000000016, 20.823006590000006, 15.314318499999999, 51.51155600000001, 21.466900000000017, 15.491816300000012, 29.75384700000002, 19.199000000000012, 4.460000000000011, 9.79639999999999, 44.49220260999999, 22.41500000000001, 42.82900000000001, 57.04900000000002], [23.271, 15.157199999999998, 5.97200000000001, 23.726000000000003, 16.070000000000014, 23.829201660000006, 31.088099999999997, 8.094999999999988, 0.0, 18.019, 5.2440212000000015, 20.732000000000006, 16.916053900000005, 54.032000000000004, 50.49999999999999, 24.887011, 67.14200000000001, 27.004006589999996, 9.48331850000001, 57.442556, 27.495900000000002, 21.4228163, 34.09684700000001, 23.723999999999997, 8.383, 1.9354000000000016, 38.55920261000001, 28.733999999999998, 47.17199999999999, 63.230000000000004], [6.718000000000003, 5.102200000000002, 16.07099999999999, 7.197000000000001, 5.558999999999985, 7.598201660000005, 14.913099999999995, 13.178000000000011, 18.019, 0.0, 22.117021199999996, 4.471000000000005, 6.581053899999995, 37.857, 34.236999999999995, 8.384011000000001, 50.681000000000004, 10.019006589999996, 27.296318500000012, 41.153556, 11.442900000000003, 5.1738163, 16.635847000000005, 6.6149999999999975, 10.944, 19.7484, 56.36620261, 12.094999999999999, 29.694999999999993, 46.42700000000001], [28.1270212, 18.667221199999997, 6.922021200000007, 23.694021199999998, 17.03602120000001, 24.143219540000004, 26.77012119999999, 12.707021199999986, 5.2440212000000015, 22.117021199999996, 0.0, 22.568021200000004, 16.640032700000003, 49.714021200000005, 46.09402119999999, 20.231010199999997, 66.3720212, 24.436014609999994, 6.643302700000014, 54.2065348, 28.1559212, 22.4448049, 28.852825800000005, 21.846021199999996, 12.081021199999997, 3.9054212000000046, 40.853218590000004, 26.602021199999996, 43.77802119999999, 64.8560212], [5.752999999999997, 6.275200000000009, 15.779999999999996, 3.085999999999996, 5.621999999999991, 3.14720166, 10.44209999999999, 14.751000000000019, 20.732000000000006, 4.471000000000005, 22.568021200000004, 0.0, 6.3100539000000015, 35.385999999999996, 29.819999999999986, 6.285010999999995, 46.41, 6.50400658999999, 24.881318500000017, 36.760555999999994, 6.997899999999998, 0.7548163000000043, 15.364847, 5.027999999999992, 12.523000000000007, 19.333400000000008, 54.22120261000001, 8.207999999999991, 28.439999999999987, 43.156], [11.833053899999998, 2.113253900000007, 11.122053899999994, 7.474053899999997, 1.1700539000000099, 7.841252240000002, 14.404153899999992, 12.609053900000017, 16.916053900000005, 6.581053899999995, 16.640032700000003, 6.3100539000000015, 0.0, 37.5800539, 33.78805389999999, 8.425042899999996, 50.552053900000004, 10.666047309999993, 20.895335400000015, 41.038502099999995, 11.8059539, 6.160837599999997, 17.462793100000003, 6.896053899999994, 8.743053900000005, 15.321453900000007, 52.34725129000001, 12.258053899999995, 30.538053899999987, 49.3220539], [33.253, 39.144800000000004, 48.269999999999996, 32.85, 38.46399999999999, 32.283401659999996, 25.593900000000012, 50.08900000000001, 54.032000000000004, 37.857, 49.714021200000005, 35.385999999999996, 37.5800539, 0.0, 5.8720000000000105, 29.555011000000004, 19.42, 30.25400659000001, 54.73291850000002, 6.933755999999997, 28.7001, 34.696016300000004, 28.722047, 31.424000000000007, 45.81100000000001, 52.26460000000001, 89.25480261000001, 27.970000000000006, 8.230000000000011, 18.614], [27.568999999999992, 35.795199999999994, 44.79999999999998, 27.069999999999993, 34.84399999999998, 27.409201659999987, 20.6281, 44.29900000000001, 50.49999999999999, 34.236999999999995, 46.09402119999999, 29.819999999999986, 33.78805389999999, 5.8720000000000105, 0.0, 25.935010999999992, 21.92200000000001, 24.63400659, 49.693318500000004, 9.672556000000009, 23.13389999999999, 29.748816299999994, 26.20684699999999, 27.761999999999997, 42.32699999999999, 48.9854, 84.01120261, 22.285999999999994, 4.722, 21.05800000000001], [7.896011000000003, 10.538211000000002, 19.25101099999999, 3.463011000000002, 8.923010999999986, 3.954209340000007, 6.611110999999996, 20.598011000000014, 24.887011, 8.384011000000001, 20.231010199999997, 6.285010999999995, 8.425042899999996, 29.555011000000004, 25.935010999999992, 0.0, 46.24101100000001, 4.733004409999996, 26.274307500000013, 34.075545000000005, 7.936911000000006, 6.2138053, 9.209836000000006, 2.127011000000003, 16.730011, 23.536411000000005, 60.484208390000006, 6.595010999999999, 24.019010999999995, 45.06101100000001], [44.207, 52.64320000000001, 61.26199999999999, 43.800000000000004, 51.401999999999994, 43.93720166, 42.50810000000001, 61.039000000000016, 67.14200000000001, 50.681000000000004, 66.3720212, 46.41, 50.552053900000004, 19.42, 21.92200000000001, 46.24101100000001, 0.0, 42.23000659000001, 68.84331850000002, 12.500556000000005, 39.9519, 46.25881630000001, 47.490847, 45.03800000000001, 58.80700000000001, 65.6414, 100.58920261000002, 40.01000000000001, 23.180000000000014, 4.510000000000001], [4.2250065899999925, 12.779206589999998, 21.398006589999987, 3.6260065899999945, 10.992006589999981, 4.0732049299999895, 5.310106589999998, 20.823006590000006, 27.004006589999996, 10.019006589999996, 24.436014609999994, 6.50400658999999, 10.666047309999993, 30.25400659000001, 24.63400659, 4.733004409999996, 42.23000659000001, 0.0, 27.709311910000007, 31.450549410000004, 4.103906590000008, 6.394809709999995, 9.14884041000001, 3.862006589999998, 18.82300659, 25.77740659, 60.72520398, 2.528006590000002, 22.422006589999995, 40.55200659000001], [30.522318500000015, 22.37411850000001, 11.22531850000002, 26.259318500000013, 21.885318500000025, 25.853916840000018, 30.143218500000007, 15.314318499999999, 9.48331850000001, 27.296318500000012, 6.643302700000014, 24.881318500000017, 20.895335400000015, 54.73291850000002, 49.693318500000004, 26.274307500000013, 68.84331850000002, 27.709311910000007, 0.0, 56.53103750000001, 30.271418500000014, 24.25490220000001, 35.009528500000016, 26.65931850000001, 16.45231850000001, 7.5479185000000095, 34.61811588999999, 29.481318500000008, 48.7913185, 68.03731850000001], [34.675556, 42.794956000000006, 51.67855599999999, 34.272556, 41.87455599999999, 34.088954339999994, 30.07445600000001, 51.51155600000001, 57.442556, 41.153556, 54.2065348, 36.760555999999994, 41.038502099999995, 6.933755999999997, 9.672556000000009, 34.075545000000005, 12.500556000000005, 31.450549410000004, 56.53103750000001, 0.0, 30.122656, 36.448739700000004, 35.357091, 34.942556, 49.059556, 55.793156, 90.74095339, 29.392556000000003, 11.638556000000008, 11.680556000000003], [4.724900000000001, 12.881300000000007, 22.015899999999995, 4.525900000000004, 11.92789999999999, 4.669301659999999, 3.87980000000001, 21.466900000000017, 27.495900000000002, 11.442900000000003, 28.1559212, 6.997899999999998, 11.8059539, 28.7001, 23.13389999999999, 7.936911000000006, 39.9519, 4.103906590000008, 30.271418500000014, 30.122656, 0.0, 6.7521163000000035, 9.554746999999999, 6.693900000000006, 19.344900000000006, 25.983500000000006, 61.009302610000006, 1.575900000000007, 21.98189999999999, 37.8399], [6.507816300000002, 6.611416300000003, 15.58681629999999, 3.014816300000001, 5.854816299999987, 2.4394146400000056, 10.198716299999994, 15.491816300000012, 21.4228163, 5.1738163, 22.4448049, 0.7548163000000043, 6.160837599999997, 34.696016300000004, 29.748816299999994, 6.2138053, 46.25881630000001, 6.394809709999995, 24.25490220000001, 36.448739700000004, 6.7521163000000035, 0.0, 14.846830700000009, 4.8328162999999975, 13.127816300000001, 19.731616300000002, 54.69541369, 8.136816299999998, 28.238816299999993, 43.872816300000004], [13.161847000000003, 19.410047000000006, 28.124846999999995, 12.542847000000005, 18.026846999999993, 12.525245340000001, 5.862946999999989, 29.75384700000002, 34.09684700000001, 16.635847000000005, 28.852825800000005, 15.364847, 17.462793100000003, 28.722047, 26.20684699999999, 9.209836000000006, 47.490847, 9.14884041000001, 35.009528500000016, 35.357091, 9.554746999999999, 14.846830700000009, 0.0, 10.56684700000001, 25.761847000000003, 32.53024700000001, 69.49404439000001, 8.000846999999993, 24.600846999999987, 46.102847], [6.7210000000000045, 8.949200000000001, 17.869999999999987, 2.172000000000003, 7.653999999999984, 2.669201660000008, 8.396099999999997, 19.199000000000012, 23.723999999999997, 6.6149999999999975, 21.846021199999996, 5.027999999999992, 6.896053899999994, 31.424000000000007, 27.761999999999997, 2.127011000000003, 45.03800000000001, 3.862006589999998, 26.65931850000001, 34.942556, 6.693900000000006, 4.8328162999999975, 10.56684700000001, 0.0, 15.550999999999998, 22.0854, 59.127202610000005, 5.748, 23.669999999999995, 43.684000000000005], [16.310000000000002, 6.936199999999999, 5.37699999999999, 15.553000000000003, 7.9930000000000145, 15.552201660000007, 22.867099999999994, 4.460000000000011, 8.383, 10.944, 12.081021199999997, 12.523000000000007, 8.743053900000005, 45.81100000000001, 42.32699999999999, 16.730011, 58.80700000000001, 18.82300659, 16.45231850000001, 49.059556, 19.344900000000006, 13.127816300000001, 25.761847000000003, 15.550999999999998, 0.0, 8.9044, 45.52220261000001, 20.653, 38.928999999999995, 55.04900000000001], [24.978400000000004, 14.9782, 4.405400000000013, 22.251400000000004, 14.785400000000015, 22.073801660000008, 29.435299999999998, 9.79639999999999, 1.9354000000000016, 19.7484, 3.9054212000000046, 19.333400000000008, 15.321453900000007, 52.26460000000001, 48.9854, 23.536411000000005, 65.6414, 25.77740659, 7.5479185000000095, 55.793156, 25.983500000000006, 19.731616300000002, 32.53024700000001, 22.0854, 8.9044, 0.0, 37.05020261, 27.3734, 45.617399999999996, 62.4894], [59.67420261000001, 51.69800261, 41.369202610000016, 57.27720261, 51.73920261000002, 57.04600095000001, 64.46110261, 44.49220260999999, 38.55920261000001, 56.36620261, 40.853218590000004, 54.22120261000001, 52.34725129000001, 89.25480261000001, 84.01120261, 60.484208390000006, 100.58920261000002, 60.72520398, 34.61811588999999, 90.74095339, 61.009302610000006, 54.69541369, 69.49404439000001, 59.127202610000005, 45.52220261000001, 37.05020261, 0.0, 62.39920261, 82.56920260999999, 97.10720261000002], [5.816999999999996, 14.371200000000002, 23.17399999999999, 5.217999999999996, 12.663999999999984, 5.797201659999993, 3.130100000000003, 22.41500000000001, 28.733999999999998, 12.094999999999999, 26.602021199999996, 8.207999999999991, 12.258053899999995, 27.970000000000006, 22.285999999999994, 6.595010999999999, 40.01000000000001, 2.528006590000002, 29.481318500000008, 29.392556000000003, 1.575900000000007, 8.136816299999998, 8.000846999999993, 5.748, 20.653, 27.3734, 62.39920261, 0.0, 20.513999999999996, 38.55600000000001], [26.23699999999999, 32.61919999999999, 41.27599999999998, 25.61799999999999, 31.10199999999998, 25.913201659999988, 22.510099999999998, 42.82900000000001, 47.17199999999999, 29.694999999999993, 43.77802119999999, 28.439999999999987, 30.538053899999987, 8.230000000000011, 4.722, 24.019010999999995, 23.180000000000014, 22.422006589999995, 48.7913185, 11.638556000000008, 21.98189999999999, 28.238816299999993, 24.600846999999987, 23.669999999999995, 38.928999999999995, 45.617399999999996, 82.56920260999999, 20.513999999999996, 0.0, 21.82600000000001], [40.451, 49.00520000000001, 58.812, 41.848000000000006, 48.151999999999994, 42.27720166, 41.68610000000001, 57.04900000000002, 63.230000000000004, 46.42700000000001, 64.8560212, 43.156, 49.3220539, 18.614, 21.05800000000001, 45.06101100000001, 4.510000000000001, 40.55200659000001, 68.03731850000001, 11.680556000000003, 37.8399, 43.872816300000004, 46.102847, 43.684000000000005, 55.04900000000001, 62.4894, 97.10720261000002, 38.55600000000001, 21.82600000000001, 0.0]]

		self.AVDIFF = self.avDiff()
		self.track = self.song_pool[self.songNum][0]

	def flag_current_song_done(self):
		print("flag called, songNum = " + str(self.songNum))
		row = self.songNum
		self.song_pool[row][1] = 1

	def get_current_track(self):
		print(self.track)
		return self.track

	def next_track(self, action):
		self.flag_current_song_done()
		if action == 'finish':

			currentSongNum = self.songNum
			row = self.songNum
			thresh1 = (self.AVDIFF/4)

			for i in range(len(self.prob_matrix[row])):
				if row == i:
					continue
				elif self.song_pool[i][1] == 0:
					if self.prob_matrix[row][i] < thresh1:
						self.track = self.song_pool[i][0]
						self.songNum = i
						break

			if self.songNum == currentSongNum:
				temp = self.prob_matrix[row]
				temp.pop(row)
				self.songNum = np.argmin(temp)

		elif action == 'like':

			currentSongNum = self.songNum
			row = self.songNum

			if self.songNum == currentSongNum:
				temp = self.prob_matrix[row]
				temp.pop(row)
				self.songNum = np.argmin(temp)

			if self.songNum == currentSongNum:
				temp = self.prob_matrix[row]
				temp.pop(row)
				self.songNum = np.argmin(temp)

		elif action == 'dislike':

			row = self.songNum
			thresh1 = (self.AVDIFF)

			for i in range(len(self.prob_matrix[row])):
				if row == i:
					continue
				elif self.song_pool[i][1] == 0:
					if self.prob_matrix[row][i] > thresh1:
						self.track = self.song_pool[i][0]
						self.songNum = i
						break

			if self.songNum == currentSongNum:
				temp = self.prob_matrix[row]
				temp.pop(row)
				self.songNum = np.argmax(temp)

		elif action == 'skip':

			row = self.songNum
			thresh1 = (self.AVDIFF/2)

			for i in range(len(self.prob_matrix[row])):
				if row == i:
					continue
				elif self.song_pool[i][1] == 0:
					if self.prob_matrix[row][i] > thresh1:
						self.track = self.song_pool[i][0]
						self.songNum = i
						break

			if self.songNum == currentSongNum:
				temp = self.prob_matrix[row]
				temp.pop(row)
				self.songNum = np.argmax(temp)

	def avDiff(self):
		## avDiff is the same for all rows
		row = 0
		tot = 0

		for i in range(len(self.prob_matrix[row])):
			tot = tot + self.prob_matrix[row][i]
		return tot/len(self.prob_matrix)

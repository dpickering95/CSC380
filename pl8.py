#*****************************************************#
# Play List 8 (pl8)                                   #
# Seed Song is spotify:track:2rmq49FcJ4U3wh1Z7C9UxE   #
# "IV. Sweatpants" by Childish Gambino                #
#*****************************************************#

import numpy as np

class pl8

	def __init__(self):

		self.songNum = 0 ## start counting from 0

		self.song_pool = [['75kiQfmmuQwgquZ9RLSvuA', 0], ['1zsAAnB6dMpGOvXjoYP9Um', 0], ['60b6B2ULC85t4Y5IjZvP7A', 0], ['46CA1H0T1r7u5lDUtVveAh', 0], ['078C2jXg7XsMgW78Gfx1JA', 0], ['0NjW4SKY3gbfl2orl1p8hr', 0], ['4y4KG66qCAN2TTevOAEjHy', 0], ['6rqj2zeKhLy3exkuFi6mSz', 0], ['3Z5pXxCb0O6L53vejFHhqQ', 0], ['1dXYBALYTj3AMxa8hgiQhA', 0], ['2Nh2cMryoXl7BrZoIeN2Pr', 0], ['1WsRuvitfegWXQJKRgRZrj', 0], ['0v3IeMw8l2M3TjIqQrihDW', 0], ['1waIBeOh2e35PFT2C4QzW6', 0], ['2q35pHabpVH0UPBfDXskvP', 0], ['7KoX0myQwA6dc6yCX8R1wS', 0], ['5AweRwX4JImp2GDZrJuRlG', 0], ['3uhpfRS0IkYZe0zcEgIafN', 0], ['0e3yW24pAKiiJfrG9idB0B', 0], ['2LbPSwV00SZImj0PlqkUJM', 0], ['5iSEsR6NKjlC9SrIJkyL3k', 0], ['5FEXPoPnzueFJQCPRIrC3c', 0], ['3f2k8op0nWDoZM4pXim6wG', 0], ['5PX4uS1LqlWEPL69phPVQQ', 0], ['0w2XbOzucHH5x7dcP5WkYn', 0], ['6XkuklKiHYVTlVvWlTgQYP', 0], ['1cdC9TCqyLwAlsw3fVJaJS', 0], ['2GtaNlidzvK3hY78kCdsHa', 0], ['393MDhe62s8hbH8ETrlxe5', 0], ['4LoMziEaxdkrSMXtavIJqL', 0]]

		self.prob_matrix = [[0.0, 55.37480000000001, 6.085850000000011, 62.1964652, 56.65277, 49.074, 51.1840344, 62.58301574, 56.09150328, 31.842176000000002, 24.794300000000003, 47.342, 58.6441, 55.48000000000001, 53.6711, 59.437002080000006, 28.495, 56.668797999999995, 23.205000000000002, 58.985, 22.848773999999995, 6.584506319999996, 6.808629999999996, 6.832960000000011, 20.275300000000005, 54.432700000000004, 49.3455218, 14.043399999999991, 36.586400000000005, 10.831690000000009], [55.37480000000001, 0.0, 53.07955, 7.34893479999999, 4.148230000000009, 8.30480000000001, 7.150765600000005, 9.703804259999997, 3.3192967200000085, 24.380424000000005, 38.98330000000001, 14.882800000000007, 5.718700000000007, 10.1388, 4.8897000000000075, 4.887797919999999, 81.7838, 10.508002000000007, 78.2198, 9.963800000000006, 40.65122600000001, 61.90129368, 53.94577000000001, 49.440039999999996, 39.4585, 107.52610000000001, 9.52827820000001, 69.1706, 27.6276, 63.484490000000015], [6.085850000000011, 53.07955, 0.0, 56.700984799999986, 56.373519999999985, 45.77984999999998, 49.05181559999999, 60.013654259999996, 50.568746719999986, 31.07432599999999, 20.739749999999994, 44.02784999999999, 53.12134999999999, 52.17985, 48.47074999999999, 53.86884791999999, 28.824850000000012, 53.36814799999999, 25.544250000000012, 55.62484999999999, 17.017675999999984, 10.511743680000006, 0.8753800000000151, 4.065109999999999, 17.434049999999992, 57.743150000000014, 44.774728199999984, 16.312150000000003, 30.755149999999997, 14.208940000000021], [62.1964652, 7.34893479999999, 56.700984799999986, 0.0, 10.8229048, 13.188465200000001, 11.190430799999996, 3.582669460000006, 7.412961919999999, 30.627710799999996, 42.5943652, 18.580465199999995, 9.834365199999999, 14.220465199999989, 8.8973652, 5.625463119999992, 84.8994652, 14.155132799999997, 81.5552652, 13.559465199999996, 44.0965088, 66.64435888, 57.5663648, 56.152494799999985, 43.695034799999995, 113.7657652, 13.4669434, 72.85913479999999, 31.328134799999994, 70.1259552], [56.65277, 4.148230000000009, 56.373519999999985, 10.8229048, 0.0, 11.066770000000002, 7.924735599999997, 11.175574260000005, 6.59726672, 25.410193999999997, 40.277269999999994, 15.764769999999997, 8.99667, 11.40476999999999, 8.081669999999999, 8.881767920000009, 84.55776999999999, 11.337971999999997, 78.99377, 10.761769999999997, 43.779196000000006, 63.19526368, 57.24206, 52.404189999999986, 40.906729999999996, 110.76007, 12.446248200000001, 70.53482999999999, 31.003829999999994, 62.222260000000006], [49.074, 8.30480000000001, 45.77984999999998, 13.188465200000001, 11.066770000000002, 0.0, 4.110034400000005, 15.591015740000007, 7.853503280000001, 18.270175999999996, 31.652299999999993, 6.965999999999995, 10.394100000000003, 9.144000000000013, 5.327100000000003, 11.09500208000001, 73.62899999999999, 9.896798000000002, 70.389, 12.119000000000003, 32.896774, 54.31250631999999, 46.54463, 43.79495999999999, 32.031299999999995, 101.21470000000001, 1.5635217999999993, 61.659399999999984, 20.128399999999992, 57.71369000000001], [51.1840344, 7.150765600000005, 49.05181559999999, 11.190430799999996, 7.924735599999997, 4.110034400000005, 0.0, 11.671038660000002, 6.083531119999996, 20.1701416, 32.9243344, 8.448034400000001, 8.624134399999999, 5.262034400000007, 3.557134399999998, 9.023032320000006, 76.7890344, 6.0147635999999975, 71.6790344, 8.2230344, 36.05673960000001, 55.738528079999995, 49.81659560000001, 47.69492559999999, 33.191265599999994, 105.1147344, 4.723512600000004, 62.81936559999999, 23.288365599999995, 61.61372440000001], [62.58301574, 9.703804259999997, 60.013654259999996, 3.582669460000006, 11.175574260000005, 15.591015740000007, 11.671038660000002, 0.0, 10.725512460000006, 30.892380260000003, 43.884715740000004, 19.893015740000003, 13.124915740000006, 15.533015739999996, 12.209915740000005, 8.93801366, 88.21201574, 15.467802260000003, 82.86401574, 14.872015740000002, 47.32117826000001, 66.97251058, 60.79103426, 58.419764259999994, 44.45570426, 116.15231574, 16.077526060000007, 74.08380426, 34.552804259999995, 72.45528574000001], [56.09150328, 3.3192967200000085, 50.568746719999986, 7.412961919999999, 6.59726672, 7.853503280000001, 6.083531119999996, 10.725512460000006, 0.0, 25.362672719999996, 35.792003279999996, 11.583503279999997, 2.552603280000003, 6.839503279999991, 2.5404032799999983, 3.6765012000000086, 78.61250328, 7.280294719999998, 75.06950328, 6.792503279999997, 37.48027072000001, 61.080003039999994, 50.76412672, 50.605456719999985, 38.13079671999999, 108.16280328, 8.29701852, 66.16089671999998, 24.61789671999999, 64.66219328000001], [31.842176000000002, 24.380424000000005, 31.07432599999999, 30.627710799999996, 25.410193999999997, 18.270175999999996, 20.1701416, 30.892380260000003, 25.362672719999996, 0.0, 14.945875999999998, 16.570176, 27.864076, 24.972176000000008, 22.919075999999997, 28.733173920000006, 59.577176, 25.910421999999997, 54.245176, 28.167176, 18.36900200000001, 37.82766968, 31.844654000000006, 27.549583999999992, 15.503323999999996, 85.56947600000001, 18.048654199999994, 45.131423999999996, 5.600423999999995, 41.599666000000006], [24.794300000000003, 38.98330000000001, 20.739749999999994, 42.5943652, 40.277269999999994, 31.652299999999993, 32.9243344, 43.884715740000004, 35.792003279999996, 14.945875999999998, 0.0, 24.818299999999997, 34.4666, 31.494300000000006, 34.343199999999996, 38.10530208, 45.9953, 32.683097999999994, 42.865500000000004, 34.939299999999996, 4.910274000000008, 29.16600632, 20.184130000000007, 20.808659999999996, 6.2168, 78.4552, 30.638821799999995, 30.430899999999994, 13.787900000000002, 34.94819000000001], [47.342, 14.882800000000007, 44.02784999999999, 18.580465199999995, 15.764769999999997, 6.965999999999995, 8.448034400000001, 19.893015740000003, 11.583503279999997, 16.570176, 24.818299999999997, 0.0, 11.7061, 8.536000000000008, 9.993099999999998, 14.079002080000002, 69.045, 9.426798, 65.405, 11.743, 28.142774000000006, 52.33050632, 43.446630000000006, 44.094959999999986, 29.381299999999996, 101.5147, 6.465521799999996, 54.90539999999999, 15.648399999999993, 58.01369000000001], [58.6441, 5.718700000000007, 53.12134999999999, 9.834365199999999, 8.99667, 10.394100000000003, 8.624134399999999, 13.124915740000006, 2.552603280000003, 27.864076, 34.4666, 11.7061, 0.0, 4.428099999999992, 5.067, 5.185102080000005, 78.29509999999999, 4.910897999999998, 76.8511, 4.423099999999998, 37.302874, 63.632606319999994, 52.65073, 53.11885999999999, 40.6834, 110.7034, 10.837621800000004, 64.25949999999999, 25.030499999999993, 67.16359000000001], [55.48000000000001, 10.1388, 52.17985, 14.220465199999989, 11.40476999999999, 9.144000000000013, 5.262034400000007, 15.533015739999996, 6.839503279999991, 24.972176000000008, 31.494300000000006, 8.536000000000008, 4.428099999999992, 0.0, 5.323099999999991, 9.005002079999997, 76.795, 1.3767979999999906, 73.94100000000002, 3.752999999999992, 35.802774000000014, 60.15250632, 51.598630000000014, 52.24696, 37.203300000000006, 109.71470000000001, 9.337521800000012, 60.7594, 23.5304, 66.27169000000002], [53.6711, 4.8897000000000075, 48.47074999999999, 8.8973652, 8.081669999999999, 5.327100000000003, 3.557134399999998, 12.209915740000005, 2.5404032799999983, 22.919075999999997, 34.343199999999996, 9.993099999999998, 5.067, 5.323099999999991, 0.0, 6.134102080000007, 77.0361, 5.703897999999998, 73.5759, 7.568100000000002, 35.903874, 58.659606319999995, 49.293730000000004, 48.26785999999999, 35.71039999999999, 105.6876, 5.7706218000000025, 64.58649999999999, 23.055499999999995, 62.218590000000006], [59.437002080000006, 4.887797919999999, 53.86884791999999, 5.625463119999992, 8.881767920000009, 11.09500208000001, 9.023032320000006, 8.93801366, 3.6765012000000086, 28.733173920000006, 38.10530208, 14.079002080000002, 5.185102080000005, 9.005002079999997, 6.134102080000007, 0.0, 80.35200208, 9.051795920000004, 77.70200208000001, 8.888002080000003, 39.01577192000001, 63.50350424, 53.27362792000001, 53.96995792, 40.55429792, 111.47570208, 10.798519720000009, 67.69639792, 26.30939792, 68.03269208000002], [28.495, 81.7838, 28.824850000000012, 84.8994652, 84.55776999999999, 73.62899999999999, 76.7890344, 88.21201574, 78.61250328, 59.577176, 45.9953, 69.045, 78.29509999999999, 76.795, 77.0361, 80.35200208, 0.0, 77.427798, 5.579999999999997, 79.816, 41.55977399999999, 22.579506320000004, 28.201629999999994, 32.85596000000001, 45.600300000000004, 33.593700000000005, 72.50452179999999, 18.73640000000001, 55.98140000000001, 22.77868999999999], [56.668797999999995, 10.508002000000007, 53.36814799999999, 14.155132799999997, 11.337971999999997, 9.896798000000002, 6.0147635999999975, 15.467802260000003, 7.280294719999998, 25.910421999999997, 32.683097999999994, 9.426798, 4.910897999999998, 1.3767979999999906, 5.703897999999998, 9.051795920000004, 77.427798, 0.0, 74.693798, 3.0097980000000017, 36.465224000000006, 60.985291679999996, 52.785832, 53.434161999999986, 38.01450199999999, 110.85549800000001, 9.862276200000002, 61.24260199999999, 24.489601999999994, 67.354488], [23.205000000000002, 78.2198, 25.544250000000012, 81.5552652, 78.99377, 70.389, 71.6790344, 82.86401574, 75.06950328, 54.245176, 42.865500000000004, 65.405, 76.8511, 73.94100000000002, 73.5759, 77.70200208000001, 5.579999999999997, 74.693798, 0.0, 76.902, 40.917773999999994, 17.957506320000007, 25.03163, 29.523960000000013, 40.978300000000004, 36.374300000000005, 69.88252179999999, 16.23440000000001, 54.74940000000001, 19.446689999999993], [58.985, 9.963800000000006, 55.62484999999999, 13.559465199999996, 10.761769999999997, 12.119000000000003, 8.2230344, 14.872015740000002, 6.792503279999997, 28.167176, 34.939299999999996, 11.743, 4.423099999999998, 3.752999999999992, 7.568100000000002, 8.888002080000003, 79.816, 3.0097980000000017, 76.902, 0.0, 39.153774000000006, 63.657506319999996, 55.04363000000001, 55.691959999999995, 40.708299999999994, 113.11170000000001, 12.478521800000003, 64.19239999999999, 26.975399999999993, 69.61069], [22.848773999999995, 40.65122600000001, 17.017675999999984, 44.0965088, 43.779196000000006, 32.896774, 36.05673960000001, 47.32117826000001, 37.48027072000001, 18.36900200000001, 4.910274000000008, 28.142774000000006, 37.302874, 35.802774000000014, 35.903874, 39.01577192000001, 41.55977399999999, 36.465224000000006, 40.917773999999994, 39.153774000000006, 0.0, 26.566267679999992, 16.331456, 16.998585999999985, 4.0405260000000105, 74.613474, 31.333252200000004, 28.762625999999983, 14.625626000000011, 31.048464000000003], [6.584506319999996, 61.90129368, 10.511743680000006, 66.64435888, 63.19526368, 54.31250631999999, 55.738528079999995, 66.97251058, 61.080003039999994, 37.82766968, 29.16600632, 52.33050632, 63.632606319999994, 60.15250632, 58.659606319999995, 63.50350424, 22.579506320000004, 60.985291679999996, 17.957506320000007, 63.657506319999996, 26.566267679999992, 0.0, 11.028123679999991, 12.818453680000006, 23.87679368, 50.43920632000001, 53.17901547999999, 7.762893679999996, 40.491893680000004, 6.9321963200000125], [6.808629999999996, 53.94577000000001, 0.8753800000000151, 57.5663648, 57.24206, 46.54463, 49.81659560000001, 60.79103426, 50.76412672, 31.844654000000006, 20.184130000000007, 43.446630000000006, 52.65073, 51.598630000000014, 49.293730000000004, 53.27362792000001, 28.201629999999994, 52.785832, 25.03163, 55.04363000000001, 16.331456, 11.028123679999991, 0.0, 4.847070000000015, 18.000670000000007, 58.549330000000005, 45.5311082, 15.574769999999987, 30.05977000000001, 15.042320000000005], [6.832960000000011, 49.440039999999996, 4.065109999999999, 56.152494799999985, 52.404189999999986, 43.79495999999999, 47.69492559999999, 58.419764259999994, 50.605456719999985, 27.549583999999992, 20.808659999999996, 44.094959999999986, 53.11885999999999, 52.24696, 48.26785999999999, 53.96995792, 32.85596000000001, 53.434161999999986, 29.523960000000013, 55.691959999999995, 16.998585999999985, 12.818453680000006, 4.847070000000015, 0.0, 16.419739999999994, 58.64626000000001, 43.573438199999984, 20.24984, 30.728839999999998, 14.20125000000002], [20.275300000000005, 39.4585, 17.434049999999992, 43.695034799999995, 40.906729999999996, 32.031299999999995, 33.191265599999994, 44.45570426, 38.13079671999999, 15.503323999999996, 6.2168, 29.381299999999996, 40.6834, 37.203300000000006, 35.71039999999999, 40.55429792, 45.600300000000004, 38.01450199999999, 40.978300000000004, 40.708299999999994, 4.0405260000000105, 23.87679368, 18.000670000000007, 16.419739999999994, 0.0, 74.12800000000001, 30.467778199999994, 29.856099999999994, 16.635100000000005, 30.620990000000013], [54.432700000000004, 107.52610000000001, 57.743150000000014, 113.7657652, 110.76007, 101.21470000000001, 105.1147344, 116.15231574, 108.16280328, 85.56947600000001, 78.4552, 101.5147, 110.7034, 109.71470000000001, 105.6876, 111.47570208, 33.593700000000005, 110.85549800000001, 36.374300000000005, 113.11170000000001, 74.613474, 50.43920632000001, 58.549330000000005, 58.64626000000001, 74.12800000000001, 0.0, 101.1102218, 51.84810000000002, 88.35110000000002, 48.62699], [49.3455218, 9.52827820000001, 44.774728199999984, 13.4669434, 12.446248200000001, 1.5635217999999993, 4.723512600000004, 16.077526060000007, 8.29701852, 18.048654199999994, 30.638821799999995, 6.465521799999996, 10.837621800000004, 9.337521800000012, 5.7706218000000025, 10.798519720000009, 72.50452179999999, 9.862276200000002, 69.88252179999999, 12.478521800000003, 31.333252200000004, 53.17901547999999, 45.5311082, 43.573438199999984, 30.467778199999994, 101.1102218, 0.0, 60.09587819999999, 18.696878199999993, 57.545211800000004], [14.043399999999991, 69.1706, 16.312150000000003, 72.85913479999999, 70.53482999999999, 61.659399999999984, 62.81936559999999, 74.08380426, 66.16089671999998, 45.131423999999996, 30.430899999999994, 54.90539999999999, 64.25949999999999, 60.7594, 64.58649999999999, 67.69639792, 18.73640000000001, 61.24260199999999, 16.23440000000001, 64.19239999999999, 28.762625999999983, 7.762893679999996, 15.574769999999987, 20.24984, 29.856099999999994, 51.84810000000002, 60.09587819999999, 0.0, 41.635, 10.345089999999981], [36.586400000000005, 27.6276, 30.755149999999997, 31.328134799999994, 31.003829999999994, 20.128399999999992, 23.288365599999995, 34.552804259999995, 24.61789671999999, 5.600423999999995, 13.787900000000002, 15.648399999999993, 25.030499999999993, 23.5304, 23.055499999999995, 26.30939792, 55.98140000000001, 24.489601999999994, 54.74940000000001, 26.975399999999993, 14.625626000000011, 40.491893680000004, 30.05977000000001, 30.728839999999998, 16.635100000000005, 88.35110000000002, 18.696878199999993, 41.635, 0.0, 44.832090000000015], [10.831690000000009, 63.484490000000015, 14.208940000000021, 70.1259552, 62.222260000000006, 57.71369000000001, 61.61372440000001, 72.45528574000001, 64.66219328000001, 41.599666000000006, 34.94819000000001, 58.01369000000001, 67.16359000000001, 66.27169000000002, 62.218590000000006, 68.03269208000002, 22.77868999999999, 67.354488, 19.446689999999993, 69.61069, 31.048464000000003, 6.9321963200000125, 15.042320000000005, 14.20125000000002, 30.620990000000013, 48.62699, 57.545211800000004, 10.345089999999981, 44.832090000000015, 0.0]]

		self.AVDIFF = self.avDiff()
		self.track = self.song_pool[self.songNum][0]

	def flag_current_song_done(self):
		print("flag called, songNum = " + str(self.songNum))
		row = self.songNum
		self.song_pool[row][1] = 1

	def get_current_track(self):
		print(self.track)
		return self.track

	def next_track(self, action):
		self.flag_current_song_done()
		if action == 'finish':

			currentSongNum = self.songNum
			row = self.songNum
			thresh1 = (self.AVDIFF/4)

			for i in range(len(self.prob_matrix[row])):
				if row == i:
					continue
				elif self.song_pool[i][1] == 0:
					if self.prob_matrix[row][i] < thresh1:
						self.track = self.song_pool[i][0]
						self.songNum = i
						break

			if self.songNum == currentSongNum:
				temp = self.prob_matrix[row]
				temp.pop(row)
				self.songNum = np.argmin(temp)

		elif action == 'like':

			currentSongNum = self.songNum
			row = self.songNum

			if self.songNum == currentSongNum:
				temp = self.prob_matrix[row]
				temp.pop(row)
				self.songNum = np.argmin(temp)

			if self.songNum == currentSongNum:
				temp = self.prob_matrix[row]
				temp.pop(row)
				self.songNum = np.argmin(temp)

		elif action == 'dislike':

			row = self.songNum
			thresh1 = (self.AVDIFF)

			for i in range(len(self.prob_matrix[row])):
				if row == i:
					continue
				elif self.song_pool[i][1] == 0:
					if self.prob_matrix[row][i] > thresh1:
						self.track = self.song_pool[i][0]
						self.songNum = i
						break

			if self.songNum == currentSongNum:
				temp = self.prob_matrix[row]
				temp.pop(row)
				self.songNum = np.argmax(temp)

		elif action == 'skip':

			row = self.songNum
			thresh1 = (self.AVDIFF/2)

			for i in range(len(self.prob_matrix[row])):
				if row == i:
					continue
				elif self.song_pool[i][1] == 0:
					if self.prob_matrix[row][i] > thresh1:
						self.track = self.song_pool[i][0]
						self.songNum = i
						break

			if self.songNum == currentSongNum:
				temp = self.prob_matrix[row]
				temp.pop(row)
				self.songNum = np.argmax(temp)

	def avDiff(self):
		## avDiff is the same for all rows
		row = 0
		tot = 0

		for i in range(len(self.prob_matrix[row])):
			tot = tot + self.prob_matrix[row][i]
		return tot/len(self.prob_matrix)

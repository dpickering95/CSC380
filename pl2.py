#*****************************************************#
# Play List 2 (pl2)                                   #
# Seed Song is spotify:track:3ckd4YA4LcD3j50rfIVwUe   #
# "Head Like a Hole" by Nine Inch Nailes              #
#*****************************************************#

import numpy as np

class pl2:

	def __init__(self):

		self.songNum = 0 ## start counting from 0

		self.song_pool = [['1d3iQh4fTm5D6iRtgrZPZ9', 0], ['4zHRHotgEcUcQzheUld3n9', 0], ['5jHYEOabEw2RSwOzf8nQPn', 0], ['0VC1EpCNjQRGWtxabI7fK6', 0], ['02UsWVUJeCckPaG7oTBD8k', 0], ['4OWpVzi8xOMjLipxYxeJYl', 0], ['5glo2bLntS03wIwYDofRXD', 0], ['0jHmidMFTjOSkzuHrNepY7', 0], ['5IZAYQW50Zb5r4yldkjDbF', 0], ['7LZN1TG85lyhHCGeXk3NC8', 0], ['0EDMG2eqzC6cudqSMPOmCL', 0], ['1nSqYL7YGQaDtu5o0V6LpS', 0], ['1OY3V4AB64zZanzBQ4b8Z1', 0], ['75XbSFs7Pf9fqGarGWGdia', 0], ['2FqqtZqMJM8uFccguf4tEI', 0], ['2Yfo6l7z6Lu6ssyaRCw9VS', 0], ['38TWmsvom1QD5N0eNWusOn', 0], ['56oJMJoE2D25LzAB1JyJ12', 0], ['1NIGrryJBB8aaCUbMrQFFs', 0], ['6fawvqdXCckayyaYKupqGz', 0], ['2uibtoCm0gT65lfzmdr7M6', 0], ['5CiT7nicnIVZjVZXanmab7', 0], ['4KEnW5DzwIcRLExU4FZCqz', 0], ['3OgdTqkseAiIkMUxj43CWI', 0], ['7CqbsfykB0lA1D7lFoRzWl', 0], ['2annAnVKRXoKXqPBlhU7XU', 0], ['5fU5M4FEwC5beAX3RChigx', 0], ['30XKh3VHF0qGaDkbhWnj6Y', 0], ['5cJSYXpZqvYNHJoakllDrS', 0], ['5B4R38byqdsirGkYuBhtSW', 0]]

		self.prob_matrix = [[0.0, 2.0344855999999956, 14.92035199999999, 16.216143000000002, 14.510871200000004, 12.9317, 36.289689889999984, 34.22959165000001, 9.087913200000006, 13.520673100000009, 38.904856, 18.397894, 39.175344, 6.379102000000006, 14.528755900000005, 20.056336000000005, 26.766504000000012, 8.830468339999992, 26.47888400000001, 2.5569709999999963, 9.365910000000003, 58.97572400000001, 33.93330400000001, 24.97100400000001, 6.496304000000004, 22.172904000000003, 42.574904000000004, 39.527504000000015, 20.174104, 17.202803999999986], [2.0344855999999956, 0.0, 14.804237599999993, 16.1386286, 14.4676144, 12.984185600000004, 36.368804289999986, 34.32170605000001, 11.1221724, 13.076212500000013, 40.587341599999995, 18.4243796, 40.9852296, 8.137383600000001, 16.2109297, 21.8942216, 28.462989600000007, 8.800004939999996, 28.199369600000008, 2.5073145999999995, 9.257575600000008, 58.85960960000001, 35.7951896, 26.645089600000006, 6.576189600000007, 23.8553896, 44.4153896, 41.20998960000001, 20.280589600000006, 17.101289599999987], [14.92035199999999, 14.804237599999993, 0.0, 28.010390999999995, 27.245823199999993, 1.9979479999999907, 22.50304188999999, 23.57794365000002, 22.042265199999996, 1.8104251000000195, 49.96310399999999, 9.432141999999985, 49.205391999999996, 16.627453999999997, 23.643107899999993, 31.27398399999999, 38.052752, 6.332220339999998, 37.579132, 12.593322999999994, 8.311661999999986, 46.05537200000002, 44.074951999999996, 36.578852, 14.526551999999988, 33.74715199999999, 52.66515199999999, 50.959752, 8.440352000000011, 20.563052000000006], [16.216143000000002, 16.1386286, 28.010390999999995, 0.0, 2.1190142000000005, 28.823843000000004, 50.505832889999986, 50.44413465000001, 9.2604562, 26.896816100000013, 27.562712999999995, 31.36017100000001, 25.834801, 12.105644999999999, 5.633298899999998, 15.761873000000003, 15.829781000000006, 21.725191339999995, 15.142001000000008, 17.450094, 24.520053000000008, 73.871761, 21.914181, 14.405881000000006, 22.711181000000007, 11.564180999999996, 30.260181000000003, 28.776781000000007, 36.387381000000005, 32.66608099999999], [14.510871200000004, 14.4676144, 27.245823199999993, 2.1190142000000005, 0.0, 27.438571200000002, 48.386818689999984, 48.328120450000014, 7.478557999999999, 25.53980190000001, 29.025727199999995, 30.878765200000007, 27.4408152, 10.739769199999998, 4.709315299999997, 15.415807200000001, 16.90537520000001, 21.267597139999996, 16.641755200000006, 16.9617002, 23.72516120000001, 73.16719520000001, 21.8027752, 14.934475200000007, 20.75577520000001, 12.137775199999997, 30.8577752, 29.492375200000005, 34.446975200000004, 31.395675199999985], [12.9317, 12.984185600000004, 1.9979479999999907, 28.823843000000004, 27.438571200000002, 0.0, 23.689389889999983, 22.01249165000001, 20.172613200000004, 2.4363731000000097, 49.663156, 11.000193999999995, 50.050644000000005, 17.137802000000004, 25.287455900000005, 30.827636000000005, 37.52480400000001, 7.566168340000008, 37.24258400000001, 11.501671000000004, 7.965609999999996, 46.05302400000001, 45.022604, 35.73830400000001, 13.441603999999998, 32.931204, 53.403204, 50.28580400000001, 7.5644040000000015, 19.909104000000017], [36.289689889999984, 36.368804289999986, 22.50304188999999, 50.505832889999986, 48.386818689999984, 23.689389889999983, 0.0, 2.3769017600000275, 43.26537668999999, 23.691016789999974, 71.15854588999998, 30.627583889999975, 71.70603388999999, 38.41658788999999, 44.88013398999999, 52.46942588999998, 59.03819388999999, 28.83480922999999, 59.22057388999999, 35.08851888999999, 29.45037988999998, 24.986413890000026, 63.75399388999998, 56.97829388999999, 34.49699388999998, 54.188593889999986, 72.99059388999999, 71.54319389, 28.12179388999998, 41.16649389], [34.22959165000001, 34.32170605000001, 23.57794365000002, 50.44413465000001, 48.328120450000014, 22.01249165000001, 2.3769017600000275, 0.0, 41.71647845000001, 23.64391855, 71.51764765000001, 32.986685650000005, 71.93693565000001, 39.07168965000002, 47.03523575000001, 52.833927650000014, 59.39729565000002, 29.503710990000016, 59.133675650000015, 33.21562065000001, 29.825281650000004, 25.17331565, 66.13089565000001, 57.35059565000002, 34.871895650000006, 54.54969565000001, 75.34969565000002, 71.90429565000002, 28.356895650000006, 41.52759565000002], [9.087913200000006, 11.1221724, 22.042265199999996, 9.2604562, 7.478557999999999, 20.172613200000004, 43.26537668999999, 41.71647845000001, 0.0, 22.608359900000014, 29.979169199999994, 25.498207200000007, 30.507257199999998, 5.414811199999999, 5.6152427, 11.136249199999998, 17.840817200000004, 15.952155139999997, 17.571197200000004, 9.9811422, 16.48760320000001, 66.09763720000001, 24.883217199999997, 16.066917200000006, 13.516217200000009, 13.247217199999994, 33.633217200000004, 30.601817200000006, 27.128417200000005, 24.30311719999999], [13.520673100000009, 13.076212500000013, 1.8104251000000195, 26.896816100000013, 25.53980190000001, 2.4363731000000097, 23.691016789999974, 23.64391855, 22.608359900000014, 0.0, 51.751529100000006, 11.220567100000004, 50.149817100000014, 17.397571100000015, 25.375117200000012, 33.06240910000001, 39.631177100000016, 7.6801952400000175, 39.36755710000002, 13.449502100000013, 9.996763100000006, 47.7833971, 45.19697710000001, 37.80927710000002, 15.700977100000006, 35.01957710000001, 53.839577100000014, 52.37417710000002, 9.606777099999992, 21.997477100000026], [38.904856, 40.587341599999995, 49.96310399999999, 27.562712999999995, 29.025727199999995, 49.663156, 71.15854588999998, 71.51764765000001, 29.979169199999994, 51.751529100000006, 0.0, 45.676962, 9.053712000000004, 34.525957999999996, 26.482411899999995, 28.179119999999998, 13.72075199999999, 44.16222033999999, 12.456171999999988, 38.35892299999999, 41.766766000000004, 86.08193200000001, 8.328351999999995, 17.09605199999999, 36.713352, 19.197151999999996, 14.811151999999993, 3.785751999999988, 48.566352, 44.83385199999998], [18.397894, 18.4243796, 9.432141999999985, 31.36017100000001, 30.878765200000007, 11.000193999999995, 30.627583889999975, 32.986685650000005, 25.498207200000007, 11.220567100000004, 45.676962, 0.0, 52.56685000000001, 20.13899600000001, 26.169449900000007, 21.890044000000007, 32.31161000000001, 9.747362340000011, 40.15219000000001, 16.000065000000006, 9.211803999999997, 46.828630000000004, 41.42721000000001, 31.93491000000001, 12.196209999999999, 30.448010000000004, 43.35801000000001, 44.330610000000014, 5.291209999999997, 11.409910000000021], [39.175344, 40.9852296, 49.205391999999996, 25.834801, 27.4408152, 50.050644000000005, 71.70603388999999, 71.93693565000001, 30.507257199999998, 50.149817100000014, 9.053712000000004, 52.56685000000001, 0.0, 33.320446, 26.848099899999998, 37.022794000000005, 22.748459999999994, 42.91651234, 14.542679999999995, 38.749215, 45.71505400000001, 95.05864000000001, 13.869060000000001, 26.082559999999997, 43.90026000000001, 27.402860000000004, 21.710859999999997, 12.831459999999993, 57.594060000000006, 53.872759999999985], [6.379102000000006, 8.137383600000001, 16.627453999999997, 12.105644999999999, 10.739769199999998, 17.137802000000004, 38.41658788999999, 39.07168965000002, 5.414811199999999, 17.397571100000015, 34.525957999999996, 20.13899600000001, 33.320446, 0.0, 8.1584539, 15.777437999999998, 22.387606000000005, 10.549366339999997, 22.114386000000003, 6.773931000000001, 13.072808000000009, 62.68282600000001, 27.992406, 20.610106000000005, 10.62340600000001, 17.794005999999996, 36.442006, 35.14860600000001, 24.283206000000007, 20.891905999999988], [14.528755900000005, 16.2109297, 23.643107899999993, 5.633298899999998, 4.709315299999997, 25.287455900000005, 44.88013398999999, 47.03523575000001, 5.6152427, 25.375117200000012, 26.482411899999995, 26.169449900000007, 26.848099899999998, 8.1584539, 0.0, 10.717091900000003, 14.494059900000005, 18.070912439999997, 14.346039900000005, 14.280384900000001, 19.02644590000001, 68.51847990000002, 20.4620599, 12.953759900000005, 17.19905990000001, 10.104459899999997, 29.106459900000004, 27.317059900000007, 30.879659900000007, 27.034359899999988], [20.056336000000005, 21.8942216, 31.27398399999999, 15.761873000000003, 15.415807200000001, 30.827636000000005, 52.46942588999998, 52.833927650000014, 11.136249199999998, 33.06240910000001, 28.179119999999998, 21.890044000000007, 37.022794000000005, 15.777437999999998, 10.717091900000003, 0.0, 14.895654000000007, 25.383318339999995, 22.639874000000006, 19.638421, 23.065646000000008, 66.61343400000001, 25.973854000000003, 14.481554000000006, 18.036854000000005, 13.032053999999999, 23.598054000000005, 26.91465400000001, 25.181254000000003, 16.929953999999984], [26.766504000000012, 28.462989600000007, 38.052752, 15.829781000000006, 16.90537520000001, 37.52480400000001, 59.03819388999999, 59.39729565000002, 17.840817200000004, 39.631177100000016, 13.72075199999999, 32.31161000000001, 22.748459999999994, 22.387606000000005, 14.494059900000005, 14.895654000000007, 0.0, 32.44097234, 8.228580000000001, 26.637675000000005, 29.780414000000015, 73.55902000000002, 11.144599999999995, 4.4203, 24.579600000000013, 7.0680000000000085, 16.613999999999997, 12.949400000000002, 34.84880000000001, 31.14409999999999], [8.830468339999992, 8.800004939999996, 6.332220339999998, 21.725191339999995, 21.267597139999996, 7.566168340000008, 28.83480922999999, 29.503710990000016, 15.952155139999997, 7.6801952400000175, 44.16222033999999, 9.747362340000011, 42.91651234, 10.549366339999997, 18.070912439999997, 25.383318339999995, 32.44097234, 0.0, 31.753192340000002, 6.329309659999995, 2.807558340000012, 52.160752340000016, 38.46917233999999, 31.00707234, 8.926772339999989, 28.175372339999992, 46.98137233999999, 45.387972340000005, 14.732572340000008, 14.99127234000001], [26.47888400000001, 28.199369600000008, 37.579132, 15.142001000000008, 16.641755200000006, 37.24258400000001, 59.22057388999999, 59.133675650000015, 17.571197200000004, 39.36755710000002, 12.456171999999988, 40.15219000000001, 14.542679999999995, 22.114386000000003, 14.346039900000005, 22.639874000000006, 8.228580000000001, 31.753192340000002, 0.0, 25.968095000000005, 31.234794000000015, 80.54044000000002, 8.774179999999994, 11.55188, 29.377180000000013, 12.860180000000009, 17.276179999999997, 13.634780000000003, 43.05138000000001, 39.330079999999995], [2.5569709999999963, 2.5073145999999995, 12.593322999999994, 17.450094, 16.9617002, 11.501671000000004, 35.08851888999999, 33.21562065000001, 9.9811422, 13.449502100000013, 38.35892299999999, 16.000065000000006, 38.749215, 6.773931000000001, 14.280384900000001, 19.638421, 26.637675000000005, 6.329309659999995, 25.968095000000005, 0.0, 7.102739000000008, 56.455855000000014, 34.742275, 25.233975000000008, 5.295275000000007, 22.372074999999995, 43.212075, 39.584675000000004, 18.951275000000006, 15.229974999999985], [9.365910000000003, 9.257575600000008, 8.311661999999986, 24.520053000000008, 23.72516120000001, 7.965609999999996, 29.45037988999998, 29.825281650000004, 16.48760320000001, 9.996763100000006, 41.766766000000004, 9.211803999999997, 45.71505400000001, 13.072808000000009, 19.02644590000001, 23.065646000000008, 29.780414000000015, 2.807558340000012, 31.234794000000015, 7.102739000000008, 0.0, 49.610034000000006, 37.797614, 28.340514000000013, 6.260214000000001, 25.508814000000005, 46.39281400000001, 42.72141400000002, 11.936013999999997, 12.324714000000021], [58.97572400000001, 58.85960960000001, 46.05537200000002, 73.871761, 73.16719520000001, 46.05302400000001, 24.986413890000026, 25.17331565, 66.09763720000001, 47.7833971, 86.08193200000001, 46.828630000000004, 95.05864000000001, 62.68282600000001, 68.51847990000002, 66.61343400000001, 73.55902000000002, 52.160752340000016, 80.54044000000002, 56.455855000000014, 49.610034000000006, 0.0, 83.14242000000002, 71.45072000000002, 52.58142, 70.00702000000001, 89.50702000000001, 85.58162000000002, 43.31222, 55.18492000000002], [33.93330400000001, 35.7951896, 44.074951999999996, 21.914181, 21.8027752, 45.022604, 63.75399388999998, 66.13089565000001, 24.883217199999997, 45.19697710000001, 8.328351999999995, 41.42721000000001, 13.869060000000001, 27.992406, 20.4620599, 25.973854000000003, 11.144599999999995, 38.46917233999999, 8.774179999999994, 34.742275, 37.797614, 83.14242000000002, 0.0, 13.272299999999994, 31.581000000000007, 14.634600000000002, 9.808600000000002, 8.275200000000009, 44.5478, 41.358499999999985], [24.97100400000001, 26.645089600000006, 36.578852, 14.405881000000006, 14.934475200000007, 35.73830400000001, 56.97829388999999, 57.35059565000002, 16.066917200000006, 37.80927710000002, 17.09605199999999, 31.93491000000001, 26.082559999999997, 20.610106000000005, 12.953759900000005, 14.481554000000006, 4.4203, 31.00707234, 11.55188, 25.233975000000008, 28.340514000000013, 71.45072000000002, 13.272299999999994, 0.0, 22.72830000000001, 2.8923000000000085, 18.972299999999997, 15.262900000000002, 33.581500000000005, 29.282199999999992], [6.496304000000004, 6.576189600000007, 14.526551999999988, 22.711181000000007, 20.75577520000001, 13.441603999999998, 34.49699388999998, 34.871895650000006, 13.516217200000009, 15.700977100000006, 36.713352, 12.196209999999999, 43.90026000000001, 10.62340600000001, 17.19905990000001, 18.036854000000005, 24.579600000000013, 8.926772339999989, 29.377180000000013, 5.295275000000007, 6.260214000000001, 52.58142, 31.581000000000007, 22.72830000000001, 0.0, 19.938600000000005, 40.49660000000001, 37.29320000000001, 13.705799999999996, 10.82449999999998], [22.172904000000003, 23.8553896, 33.74715199999999, 11.564180999999996, 12.137775199999997, 32.931204, 54.188593889999986, 54.54969565000001, 13.247217199999994, 35.01957710000001, 19.197151999999996, 30.448010000000004, 27.402860000000004, 17.794005999999996, 10.104459899999997, 13.032053999999999, 7.0680000000000085, 28.175372339999992, 12.860180000000009, 22.372074999999995, 25.508814000000005, 70.00702000000001, 14.634600000000002, 2.8923000000000085, 19.938600000000005, 0.0, 21.662000000000006, 17.91060000000001, 32.1192, 27.786099999999983], [42.574904000000004, 44.4153896, 52.66515199999999, 30.260181000000003, 30.8577752, 53.403204, 72.99059388999999, 75.34969565000002, 33.633217200000004, 53.839577100000014, 14.811151999999993, 43.35801000000001, 21.710859999999997, 36.442006, 29.106459900000004, 23.598054000000005, 16.613999999999997, 46.98137233999999, 17.276179999999997, 43.212075, 46.39281400000001, 89.50702000000001, 9.808600000000002, 18.972299999999997, 40.49660000000001, 21.662000000000006, 0.0, 11.349400000000006, 47.06680000000001, 34.462099999999985], [39.527504000000015, 41.20998960000001, 50.959752, 28.776781000000007, 29.492375200000005, 50.28580400000001, 71.54319389, 71.90429565000002, 30.601817200000006, 52.37417710000002, 3.785751999999988, 44.330610000000014, 12.831459999999993, 35.14860600000001, 27.317059900000007, 26.91465400000001, 12.949400000000002, 45.387972340000005, 13.634780000000003, 39.584675000000004, 42.72141400000002, 85.58162000000002, 8.275200000000009, 15.262900000000002, 37.29320000000001, 17.91060000000001, 11.349400000000006, 0.0, 46.13540000000001, 41.726699999999994], [20.174104, 20.280589600000006, 8.440352000000011, 36.387381000000005, 34.446975200000004, 7.5644040000000015, 28.12179388999998, 28.356895650000006, 27.128417200000005, 9.606777099999992, 48.566352, 5.291209999999997, 57.594060000000006, 24.283206000000007, 30.879659900000007, 25.181254000000003, 34.84880000000001, 14.732572340000008, 43.05138000000001, 18.951275000000006, 11.936013999999997, 43.31222, 44.5478, 33.581500000000005, 13.705799999999996, 32.1192, 47.06680000000001, 46.13540000000001, 0.0, 13.51530000000002], [17.202803999999986, 17.101289599999987, 20.563052000000006, 32.66608099999999, 31.395675199999985, 19.909104000000017, 41.16649389, 41.52759565000002, 24.30311719999999, 21.997477100000026, 44.83385199999998, 11.409910000000021, 53.872759999999985, 20.891905999999988, 27.034359899999988, 16.929953999999984, 31.14409999999999, 14.99127234000001, 39.330079999999995, 15.229974999999985, 12.324714000000021, 55.18492000000002, 41.358499999999985, 29.282199999999992, 10.82449999999998, 27.786099999999983, 34.462099999999985, 41.726699999999994, 13.51530000000002, 0.0]]

		self.AVDIFF = self.avDiff()
		self.track = self.song_pool[self.songNum][0]

	def flag_current_song_done(self):
		print("flag called, songNum = " + str(self.songNum))
		row = self.songNum
		self.song_pool[row][1] = 1

	def get_current_track(self):
		print(self.track)
		return self.track

	def next_track(self, action):
		self.flag_current_song_done()
		if action == 'finish':

			currentSongNum = self.songNum
			row = self.songNum
			thresh1 = (self.AVDIFF/3)

			for i in range(len(self.prob_matrix[row])):
				if row == i:
					continue
				elif self.song_pool[i][1] == 0:
					if self.prob_matrix[row][i] < thresh1:
						self.track = self.song_pool[i][0]
						self.songNum = i
						break

			if self.songNum == currentSongNum:
				temp = self.prob_matrix[row]
				temp.pop(row)
				self.songNum = np.argmin(temp)

		elif action == 'like':

			currentSongNum = self.songNum
			row = self.songNum
			thresh = (self.AVDIFF/4)

			for i in range(len(self.prob_matrix[row])):
				if row == i:
					continue
				elif self.song_pool[i][1] == 0:
					if self.prob_matrix[row][i] < thresh:
						self.track = self.song_pool[i][0]
						self.songNum = i
						break

			if self.songNum == currentSongNum:
				temp = self.prob_matrix[row]
				temp.pop(row)
				self.songNum = np.argmin(temp)
				
		elif action == 'dislike':

			currentSongNum = self.songNum
			row = self.songNum
			thresh1 = (self.AVDIFF)

			for i in range(len(self.prob_matrix[row])):
				if row == i:
					continue
				elif self.song_pool[i][1] == 0:
					if self.prob_matrix[row][i] > thresh1:
						self.track = self.song_pool[i][0]
						self.songNum = i
						break

			if self.songNum == currentSongNum:
				temp = self.prob_matrix[row]
				temp.pop(row)
				self.songNum = np.argmax(temp)

		elif action == 'skip':

			currentSongNum = self.songNum
			row = self.songNum
			thresh1 = (self.AVDIFF/2)

			for i in range(len(self.prob_matrix[row])):
				if row == i:
					continue
				elif self.song_pool[i][1] == 0:
					if self.prob_matrix[row][i] > thresh1:
						self.track = self.song_pool[i][0]
						self.songNum = i
						break

			if self.songNum == currentSongNum:
				temp = self.prob_matrix[row]
				temp.pop(row)
				self.songNum = np.argmax(temp)

	def avDiff(self):
		## avDiff is the same for all rows
		row = 0
		tot = 0

		for i in range(len(self.prob_matrix[row])):
			tot = tot + self.prob_matrix[row][i]
		return tot/len(self.prob_matrix)
